var In=Object.create;var L=Object.defineProperty,Pn=Object.defineProperties,Tn=Object.getOwnPropertyDescriptor,Cn=Object.getOwnPropertyDescriptors,Gn=Object.getOwnPropertyNames,Te=Object.getOwnPropertySymbols,An=Object.getPrototypeOf,Ge=Object.prototype.hasOwnProperty,On=Object.prototype.propertyIsEnumerable;var Ce=(e,t,n)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))Ge.call(t,n)&&Ce(e,n,t[n]);if(Te)for(var n of Te(t))On.call(t,n)&&Ce(e,n,t[n]);return e},b=(e,t)=>Pn(e,Cn(t)),Ae=e=>L(e,"__esModule",{value:!0});var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Bn=(e,t)=>{for(var n in t)L(e,n,{get:t[n],enumerable:!0})},Oe=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Gn(t))!Ge.call(e,s)&&(n||s!=="default")&&L(e,s,{get:()=>t[s],enumerable:!(r=Tn(t,s))||r.enumerable});return e},Be=(e,t)=>Oe(Ae(L(e!=null?In(An(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Rn=(e=>(t,n)=>e&&e.get(t)||(n=Oe(Ae({}),t,1),e&&e.set(t,n),n))(typeof WeakMap!="undefined"?new WeakMap:0);var ke=l((Os,Le)=>{Le.exports=Ne;Ne.sync=Nn;var Re=require("fs");function qn(e,t){var n=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!n||(n=n.split(";"),n.indexOf("")!==-1))return!0;for(var r=0;r<n.length;r++){var s=n[r].toLowerCase();if(s&&e.substr(-s.length).toLowerCase()===s)return!0}return!1}function qe(e,t,n){return!e.isSymbolicLink()&&!e.isFile()?!1:qn(t,n)}function Ne(e,t,n){Re.stat(e,function(r,s){n(r,r?!1:qe(s,e,t))})}function Nn(e,t){return qe(Re.statSync(e),e,t)}});var je=l((Bs,Me)=>{Me.exports=_e;_e.sync=Ln;var De=require("fs");function _e(e,t,n){De.stat(e,function(r,s){n(r,r?!1:$e(s,t))})}function Ln(e,t){return $e(De.statSync(e),t)}function $e(e,t){return e.isFile()&&kn(e,t)}function kn(e,t){var n=e.mode,r=e.uid,s=e.gid,o=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),i=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),c=parseInt("100",8),a=parseInt("010",8),u=parseInt("001",8),f=c|a,p=n&u||n&a&&s===i||n&c&&r===o||n&f&&o===0;return p}});var Ue=l((qs,Fe)=>{var Rs=require("fs"),U;process.platform==="win32"||global.TESTING_WINDOWS?U=ke():U=je();Fe.exports=ne;ne.sync=Dn;function ne(e,t,n){if(typeof t=="function"&&(n=t,t={}),!n){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,s){ne(e,t||{},function(o,i){o?s(o):r(i)})})}U(e,t||{},function(r,s){r&&(r.code==="EACCES"||t&&t.ignoreErrors)&&(r=null,s=!1),n(r,s)})}function Dn(e,t){try{return U.sync(e,t||{})}catch(n){if(t&&t.ignoreErrors||n.code==="EACCES")return!1;throw n}}});var Ye=l((Ns,Ve)=>{var T=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Xe=require("path"),_n=T?";":":",He=Ue(),Ke=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),ze=(e,t)=>{let n=t.colon||_n,r=e.match(/\//)||T&&e.match(/\\/)?[""]:[...T?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(n)],s=T?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=T?s.split(n):[""];return T&&e.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:r,pathExt:o,pathExtExe:s}},We=(e,t,n)=>{typeof t=="function"&&(n=t,t={}),t||(t={});let{pathEnv:r,pathExt:s,pathExtExe:o}=ze(e,t),i=[],c=u=>new Promise((f,p)=>{if(u===r.length)return t.all&&i.length?f(i):p(Ke(e));let S=r[u],y=/^".*"$/.test(S)?S.slice(1,-1):S,x=Xe.join(y,e),v=!y&&/^\.[\\\/]/.test(e)?e.slice(0,2)+x:x;f(a(v,u,0))}),a=(u,f,p)=>new Promise((S,y)=>{if(p===s.length)return S(c(f+1));let x=s[p];He(u+x,{pathExt:o},(v,P)=>{if(!v&&P)if(t.all)i.push(u+x);else return S(u+x);return S(a(u,f,p+1))})});return n?c(0).then(u=>n(null,u),n):c(0)},$n=(e,t)=>{t=t||{};let{pathEnv:n,pathExt:r,pathExtExe:s}=ze(e,t),o=[];for(let i=0;i<n.length;i++){let c=n[i],a=/^".*"$/.test(c)?c.slice(1,-1):c,u=Xe.join(a,e),f=!a&&/^\.[\\\/]/.test(e)?e.slice(0,2)+u:u;for(let p=0;p<r.length;p++){let S=f+r[p];try{if(He.sync(S,{pathExt:s}))if(t.all)o.push(S);else return S}catch{}}}if(t.all&&o.length)return o;if(t.nothrow)return null;throw Ke(e)};Ve.exports=We;We.sync=$n});var se=l((Ls,re)=>{"use strict";var Qe=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"};re.exports=Qe;re.exports.default=Qe});var tt=l((ks,et)=>{"use strict";var Ze=require("path"),Mn=Ye(),jn=se();function Je(e,t){let n=e.options.env||process.env,r=process.cwd(),s=e.options.cwd!=null,o=s&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(e.options.cwd)}catch{}let i;try{i=Mn.sync(e.command,{path:n[jn({env:n})],pathExt:t?Ze.delimiter:void 0})}catch{}finally{o&&process.chdir(r)}return i&&(i=Ze.resolve(s?e.options.cwd:"",i)),i}function Fn(e){return Je(e)||Je(e,!0)}et.exports=Fn});var nt=l((Ds,ie)=>{"use strict";var oe=/([()\][%!^"`<>&|;, *?])/g;function Un(e){return e=e.replace(oe,"^$1"),e}function Xn(e,t){return e=`${e}`,e=e.replace(/(\\*)"/g,'$1$1\\"'),e=e.replace(/(\\*)$/,"$1$1"),e=`"${e}"`,e=e.replace(oe,"^$1"),t&&(e=e.replace(oe,"^$1")),e}ie.exports.command=Un;ie.exports.argument=Xn});var st=l((_s,rt)=>{"use strict";rt.exports=/^#!(.*)/});var it=l(($s,ot)=>{"use strict";var Hn=st();ot.exports=(e="")=>{let t=e.match(Hn);if(!t)return null;let[n,r]=t[0].replace(/#! ?/,"").split(" "),s=n.split("/").pop();return s==="env"?r:r?`${s} ${r}`:s}});var at=l((Ms,ct)=>{"use strict";var ce=require("fs"),Kn=it();function zn(e){let n=Buffer.alloc(150),r;try{r=ce.openSync(e,"r"),ce.readSync(r,n,0,150,0),ce.closeSync(r)}catch{}return Kn(n.toString())}ct.exports=zn});var ft=l((js,dt)=>{"use strict";var Wn=require("path"),ut=tt(),lt=nt(),Vn=at(),Yn=process.platform==="win32",Qn=/\.(?:com|exe)$/i,Zn=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Jn(e){e.file=ut(e);let t=e.file&&Vn(e.file);return t?(e.args.unshift(e.file),e.command=t,ut(e)):e.file}function er(e){if(!Yn)return e;let t=Jn(e),n=!Qn.test(t);if(e.options.forceShell||n){let r=Zn.test(t);e.command=Wn.normalize(e.command),e.command=lt.command(e.command),e.args=e.args.map(o=>lt.argument(o,r));let s=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${s}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function tr(e,t,n){t&&!Array.isArray(t)&&(n=t,t=null),t=t?t.slice(0):[],n=Object.assign({},n);let r={command:e,args:t,options:n,file:void 0,original:{command:e,args:t}};return n.shell?r:er(r)}dt.exports=tr});var ht=l((Fs,mt)=>{"use strict";var ae=process.platform==="win32";function ue(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function nr(e,t){if(!ae)return;let n=e.emit;e.emit=function(r,s){if(r==="exit"){let o=pt(s,t,"spawn");if(o)return n.call(e,"error",o)}return n.apply(e,arguments)}}function pt(e,t){return ae&&e===1&&!t.file?ue(t.original,"spawn"):null}function rr(e,t){return ae&&e===1&&!t.file?ue(t.original,"spawnSync"):null}mt.exports={hookChildProcess:nr,verifyENOENT:pt,verifyENOENTSync:rr,notFoundError:ue}});var yt=l((Us,C)=>{"use strict";var gt=require("child_process"),le=ft(),de=ht();function St(e,t,n){let r=le(e,t,n),s=gt.spawn(r.command,r.args,r.options);return de.hookChildProcess(s,r),s}function sr(e,t,n){let r=le(e,t,n),s=gt.spawnSync(r.command,r.args,r.options);return s.error=s.error||de.verifyENOENTSync(s.status,r),s}C.exports=St;C.exports.spawn=St;C.exports.sync=sr;C.exports._parse=le;C.exports._enoent=de});var vt=l((Xs,xt)=>{"use strict";xt.exports=e=>{let t=typeof e=="string"?`
`:`
`.charCodeAt(),n=typeof e=="string"?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===n&&(e=e.slice(0,e.length-1)),e}});var Et=l((Hs,D)=>{"use strict";var k=require("path"),wt=se(),bt=e=>{e=m({cwd:process.cwd(),path:process.env[wt()],execPath:process.execPath},e);let t,n=k.resolve(e.cwd),r=[];for(;t!==n;)r.push(k.join(n,"node_modules/.bin")),t=n,n=k.resolve(n,"..");let s=k.resolve(e.cwd,e.execPath,"..");return r.push(s),r.concat(e.path).join(k.delimiter)};D.exports=bt;D.exports.default=bt;D.exports.env=e=>{e=m({env:process.env},e);let t=m({},e.env),n=wt({env:t});return e.path=t[n],t[n]=D.exports(e),t}});var Pt=l((Ks,fe)=>{"use strict";var It=(e,t)=>{for(let n of Reflect.ownKeys(t))Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n));return e};fe.exports=It;fe.exports.default=It});var Ct=l((zs,H)=>{"use strict";var or=Pt(),X=new WeakMap,Tt=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let n,r=0,s=e.displayName||e.name||"<anonymous>",o=function(...i){if(X.set(o,++r),r===1)n=e.apply(this,i),e=null;else if(t.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return n};return or(o,e),X.set(o,r),o};H.exports=Tt;H.exports.default=Tt;H.exports.callCount=e=>{if(!X.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return X.get(e)}});var Gt=l(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});K.SIGNALS=void 0;var ir=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];K.SIGNALS=ir});var pe=l(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.SIGRTMAX=G.getRealtimeSignals=void 0;var cr=function(){let e=Ot-At+1;return Array.from({length:e},ar)};G.getRealtimeSignals=cr;var ar=function(e,t){return{name:`SIGRT${t+1}`,number:At+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},At=34,Ot=64;G.SIGRTMAX=Ot});var Bt=l(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.getSignals=void 0;var ur=require("os"),lr=Gt(),dr=pe(),fr=function(){let e=(0,dr.getRealtimeSignals)();return[...lr.SIGNALS,...e].map(pr)};z.getSignals=fr;var pr=function({name:e,number:t,description:n,action:r,forced:s=!1,standard:o}){let{signals:{[e]:i}}=ur.constants,c=i!==void 0;return{name:e,number:c?i:t,description:n,supported:c,action:r,forced:s,standard:o}}});var qt=l(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.signalsByNumber=A.signalsByName=void 0;var mr=require("os"),Rt=Bt(),hr=pe(),gr=function(){return(0,Rt.getSignals)().reduce(Sr,{})},Sr=function(e,{name:t,number:n,description:r,supported:s,action:o,forced:i,standard:c}){return b(m({},e),{[t]:{name:t,number:n,description:r,supported:s,action:o,forced:i,standard:c}})},yr=gr();A.signalsByName=yr;var xr=function(){let e=(0,Rt.getSignals)(),t=hr.SIGRTMAX+1,n=Array.from({length:t},(r,s)=>vr(s,e));return Object.assign({},...n)},vr=function(e,t){let n=wr(e,t);if(n===void 0)return{};let{name:r,description:s,supported:o,action:i,forced:c,standard:a}=n;return{[e]:{name:r,number:e,description:s,supported:o,action:i,forced:c,standard:a}}},wr=function(e,t){let n=t.find(({name:r})=>mr.constants.signals[r]===e);return n!==void 0?n:t.find(r=>r.number===e)},br=xr();A.signalsByNumber=br});var Lt=l((Zs,Nt)=>{"use strict";var{signalsByName:Er}=qt(),Ir=({timedOut:e,timeout:t,errorCode:n,signal:r,signalDescription:s,exitCode:o,isCanceled:i})=>e?`timed out after ${t} milliseconds`:i?"was canceled":n!==void 0?`failed with ${n}`:r!==void 0?`was killed with ${r} (${s})`:o!==void 0?`failed with exit code ${o}`:"failed",Pr=({stdout:e,stderr:t,all:n,error:r,signal:s,exitCode:o,command:i,escapedCommand:c,timedOut:a,isCanceled:u,killed:f,parsed:{options:{timeout:p}}})=>{o=o===null?void 0:o,s=s===null?void 0:s;let S=s===void 0?void 0:Er[s].description,y=r&&r.code,v=`Command ${Ir({timedOut:a,timeout:p,errorCode:y,signal:s,signalDescription:S,exitCode:o,isCanceled:u})}: ${i}`,P=Object.prototype.toString.call(r)==="[object Error]",j=P?`${v}
${r.message}`:v,F=[j,t,e].filter(Boolean).join(`
`);return P?(r.originalMessage=r.message,r.message=F):r=new Error(F),r.shortMessage=j,r.command=i,r.escapedCommand=c,r.exitCode=o,r.signal=s,r.signalDescription=S,r.stdout=e,r.stderr=t,n!==void 0&&(r.all=n),"bufferedData"in r&&delete r.bufferedData,r.failed=!0,r.timedOut=Boolean(a),r.isCanceled=u,r.killed=f&&!a,r};Nt.exports=Pr});var Dt=l((Js,me)=>{"use strict";var W=["stdin","stdout","stderr"],Tr=e=>W.some(t=>e[t]!==void 0),kt=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return W.map(r=>e[r]);if(Tr(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${W.map(r=>`\`${r}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let n=Math.max(t.length,W.length);return Array.from({length:n},(r,s)=>t[s])};me.exports=kt;me.exports.node=e=>{let t=kt(e);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var _t=l((eo,V)=>{V.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&V.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&V.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Ut=l((to,R)=>{var d=global.process,E=function(e){return e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function"};E(d)?($t=require("assert"),O=_t(),Mt=/^win/i.test(d.platform),_=require("events"),typeof _!="function"&&(_=_.EventEmitter),d.__signal_exit_emitter__?h=d.__signal_exit_emitter__:(h=d.__signal_exit_emitter__=new _,h.count=0,h.emitted={}),h.infinite||(h.setMaxListeners(1/0),h.infinite=!0),R.exports=function(e,t){if(!E(global.process))return function(){};$t.equal(typeof e,"function","a callback must be provided for exit handler"),B===!1&&he();var n="exit";t&&t.alwaysLast&&(n="afterexit");var r=function(){h.removeListener(n,e),h.listeners("exit").length===0&&h.listeners("afterexit").length===0&&Y()};return h.on(n,e),r},Y=function(){!B||!E(global.process)||(B=!1,O.forEach(function(t){try{d.removeListener(t,Q[t])}catch{}}),d.emit=Z,d.reallyExit=ge,h.count-=1)},R.exports.unload=Y,I=function(t,n,r){h.emitted[t]||(h.emitted[t]=!0,h.emit(t,n,r))},Q={},O.forEach(function(e){Q[e]=function(){if(!!E(global.process)){var n=d.listeners(e);n.length===h.count&&(Y(),I("exit",null,e),I("afterexit",null,e),Mt&&e==="SIGHUP"&&(e="SIGINT"),d.kill(d.pid,e))}}}),R.exports.signals=function(){return O},B=!1,he=function(){B||!E(global.process)||(B=!0,h.count+=1,O=O.filter(function(t){try{return d.on(t,Q[t]),!0}catch{return!1}}),d.emit=Ft,d.reallyExit=jt)},R.exports.load=he,ge=d.reallyExit,jt=function(t){!E(global.process)||(d.exitCode=t||0,I("exit",d.exitCode,null),I("afterexit",d.exitCode,null),ge.call(d,d.exitCode))},Z=d.emit,Ft=function(t,n){if(t==="exit"&&E(global.process)){n!==void 0&&(d.exitCode=n);var r=Z.apply(this,arguments);return I("exit",d.exitCode,null),I("afterexit",d.exitCode,null),r}else return Z.apply(this,arguments)}):R.exports=function(){return function(){}};var $t,O,Mt,_,h,Y,I,Q,B,he,ge,jt,Z,Ft});var Ht=l((no,Xt)=>{"use strict";var Cr=require("os"),Gr=Ut(),Ar=1e3*5,Or=(e,t="SIGTERM",n={})=>{let r=e(t);return Br(e,t,n,r),r},Br=(e,t,n,r)=>{if(!Rr(t,n,r))return;let s=Nr(n),o=setTimeout(()=>{e("SIGKILL")},s);o.unref&&o.unref()},Rr=(e,{forceKillAfterTimeout:t},n)=>qr(e)&&t!==!1&&n,qr=e=>e===Cr.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",Nr=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return Ar;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},Lr=(e,t)=>{e.kill()&&(t.isCanceled=!0)},kr=(e,t,n)=>{e.kill(t),n(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},Dr=(e,{timeout:t,killSignal:n="SIGTERM"},r)=>{if(t===0||t===void 0)return r;let s,o=new Promise((c,a)=>{s=setTimeout(()=>{kr(e,n,a)},t)}),i=r.finally(()=>{clearTimeout(s)});return Promise.race([o,i])},_r=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},$r=async(e,{cleanup:t,detached:n},r)=>{if(!t||n)return r;let s=Gr(()=>{e.kill()});return r.finally(()=>{s()})};Xt.exports={spawnedKill:Or,spawnedCancel:Lr,setupTimeout:Dr,validateTimeout:_r,setExitHandler:$r}});var zt=l((ro,Kt)=>{"use strict";var w=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";w.writable=e=>w(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";w.readable=e=>w(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";w.duplex=e=>w.writable(e)&&w.readable(e);w.transform=e=>w.duplex(e)&&typeof e._transform=="function";Kt.exports=w});var Vt=l((so,Wt)=>{"use strict";var{PassThrough:Mr}=require("stream");Wt.exports=e=>{e=m({},e);let{array:t}=e,{encoding:n}=e,r=n==="buffer",s=!1;t?s=!(n||r):n=n||"utf8",r&&(n=null);let o=new Mr({objectMode:s});n&&o.setEncoding(n);let i=0,c=[];return o.on("data",a=>{c.push(a),s?i=c.length:i+=a.length}),o.getBufferedValue=()=>t?c:r?Buffer.concat(c,i):c.join(""),o.getBufferedLength=()=>i,o}});var Yt=l((oo,$)=>{"use strict";var{constants:jr}=require("buffer"),Fr=require("stream"),{promisify:Ur}=require("util"),Xr=Vt(),Hr=Ur(Fr.pipeline),Se=class extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}};async function ye(e,t){if(!e)throw new Error("Expected a stream");t=m({maxBuffer:1/0},t);let{maxBuffer:n}=t,r=Xr(t);return await new Promise((s,o)=>{let i=c=>{c&&r.getBufferedLength()<=jr.MAX_LENGTH&&(c.bufferedData=r.getBufferedValue()),o(c)};(async()=>{try{await Hr(e,r),s()}catch(c){i(c)}})(),r.on("data",()=>{r.getBufferedLength()>n&&i(new Se)})}),r.getBufferedValue()}$.exports=ye;$.exports.buffer=(e,t)=>ye(e,b(m({},t),{encoding:"buffer"}));$.exports.array=(e,t)=>ye(e,b(m({},t),{array:!0}));$.exports.MaxBufferError=Se});var Zt=l((io,Qt)=>{"use strict";var{PassThrough:Kr}=require("stream");Qt.exports=function(){var e=[],t=new Kr({objectMode:!0});return t.setMaxListeners(0),t.add=n,t.isEmpty=r,t.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(n),t;function n(o){return Array.isArray(o)?(o.forEach(n),this):(e.push(o),o.once("end",s.bind(null,o)),o.once("error",t.emit.bind(t,"error")),o.pipe(t,{end:!1}),this)}function r(){return e.length==0}function s(o){e=e.filter(function(i){return i!==o}),!e.length&&t.readable&&t.end()}}});var nn=l((co,tn)=>{"use strict";var en=zt(),Jt=Yt(),zr=Zt(),Wr=(e,t)=>{t===void 0||e.stdin===void 0||(en(t)?t.pipe(e.stdin):e.stdin.end(t))},Vr=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let n=zr();return e.stdout&&n.add(e.stdout),e.stderr&&n.add(e.stderr),n},xe=async(e,t)=>{if(!!e){e.destroy();try{return await t}catch(n){return n.bufferedData}}},ve=(e,{encoding:t,buffer:n,maxBuffer:r})=>{if(!(!e||!n))return t?Jt(e,{encoding:t,maxBuffer:r}):Jt.buffer(e,{maxBuffer:r})},Yr=async({stdout:e,stderr:t,all:n},{encoding:r,buffer:s,maxBuffer:o},i)=>{let c=ve(e,{encoding:r,buffer:s,maxBuffer:o}),a=ve(t,{encoding:r,buffer:s,maxBuffer:o}),u=ve(n,{encoding:r,buffer:s,maxBuffer:o*2});try{return await Promise.all([i,c,a,u])}catch(f){return Promise.all([{error:f,signal:f.signal,timedOut:f.timedOut},xe(e,c),xe(t,a),xe(n,u)])}},Qr=({input:e})=>{if(en(e))throw new TypeError("The `input` option cannot be a stream in sync mode")};tn.exports={handleInput:Wr,makeAllStream:Vr,getSpawnedResult:Yr,validateInputSync:Qr}});var sn=l((ao,rn)=>{"use strict";var Zr=(async()=>{})().constructor.prototype,Jr=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(Zr,e)]),es=(e,t)=>{for(let[n,r]of Jr){let s=typeof t=="function"?(...o)=>Reflect.apply(r.value,t(),o):r.value.bind(t);Reflect.defineProperty(e,n,b(m({},r),{value:s}))}return e},ts=e=>new Promise((t,n)=>{e.on("exit",(r,s)=>{t({exitCode:r,signal:s})}),e.on("error",r=>{n(r)}),e.stdin&&e.stdin.on("error",r=>{n(r)})});rn.exports={mergePromise:es,getSpawnedPromise:ts}});var an=l((uo,cn)=>{"use strict";var on=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],ns=/^[\w.-]+$/,rs=/"/g,ss=e=>typeof e!="string"||ns.test(e)?e:`"${e.replace(rs,'\\"')}"`,os=(e,t)=>on(e,t).join(" "),is=(e,t)=>on(e,t).map(n=>ss(n)).join(" "),cs=/ +/g,as=e=>{let t=[];for(let n of e.trim().split(cs)){let r=t[t.length-1];r&&r.endsWith("\\")?t[t.length-1]=`${r.slice(0,-1)} ${n}`:t.push(n)}return t};cn.exports={joinCommand:os,getEscapedCommand:is,parseCommand:as}});var hn=l((lo,q)=>{"use strict";var us=require("path"),we=require("child_process"),ls=yt(),ds=vt(),fs=Et(),ps=Ct(),J=Lt(),ln=Dt(),{spawnedKill:ms,spawnedCancel:hs,setupTimeout:gs,validateTimeout:Ss,setExitHandler:ys}=Ht(),{handleInput:xs,getSpawnedResult:vs,makeAllStream:ws,validateInputSync:bs}=nn(),{mergePromise:un,getSpawnedPromise:Es}=sn(),{joinCommand:dn,parseCommand:fn,getEscapedCommand:pn}=an(),Is=1e3*1e3*100,Ps=({env:e,extendEnv:t,preferLocal:n,localDir:r,execPath:s})=>{let o=t?m(m({},process.env),e):e;return n?fs.env({env:o,cwd:r,execPath:s}):o},mn=(e,t,n={})=>{let r=ls._parse(e,t,n);return e=r.command,t=r.args,n=r.options,n=m({maxBuffer:Is,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:n.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0},n),n.env=Ps(n),n.stdio=ln(n),process.platform==="win32"&&us.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:n,parsed:r}},M=(e,t,n)=>typeof t!="string"&&!Buffer.isBuffer(t)?n===void 0?void 0:"":e.stripFinalNewline?ds(t):t,ee=(e,t,n)=>{let r=mn(e,t,n),s=dn(e,t),o=pn(e,t);Ss(r.options);let i;try{i=we.spawn(r.file,r.args,r.options)}catch(y){let x=new we.ChildProcess,v=Promise.reject(J({error:y,stdout:"",stderr:"",all:"",command:s,escapedCommand:o,parsed:r,timedOut:!1,isCanceled:!1,killed:!1}));return un(x,v)}let c=Es(i),a=gs(i,r.options,c),u=ys(i,r.options,a),f={isCanceled:!1};i.kill=ms.bind(null,i.kill.bind(i)),i.cancel=hs.bind(null,i,f);let S=ps(async()=>{let[{error:y,exitCode:x,signal:v,timedOut:P},j,F,En]=await vs(i,r.options,u),be=M(r.options,j),Ee=M(r.options,F),Ie=M(r.options,En);if(y||x!==0||v!==null){let Pe=J({error:y,exitCode:x,signal:v,stdout:be,stderr:Ee,all:Ie,command:s,escapedCommand:o,parsed:r,timedOut:P,isCanceled:f.isCanceled,killed:i.killed});if(!r.options.reject)return Pe;throw Pe}return{command:s,escapedCommand:o,exitCode:0,stdout:be,stderr:Ee,all:Ie,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return xs(i,r.options.input),i.all=ws(i,r.options),un(i,S)};q.exports=ee;q.exports.sync=(e,t,n)=>{let r=mn(e,t,n),s=dn(e,t),o=pn(e,t);bs(r.options);let i;try{i=we.spawnSync(r.file,r.args,r.options)}catch(u){throw J({error:u,stdout:"",stderr:"",all:"",command:s,escapedCommand:o,parsed:r,timedOut:!1,isCanceled:!1,killed:!1})}let c=M(r.options,i.stdout,i.error),a=M(r.options,i.stderr,i.error);if(i.error||i.status!==0||i.signal!==null){let u=J({stdout:c,stderr:a,error:i.error,signal:i.signal,exitCode:i.status,command:s,escapedCommand:o,parsed:r,timedOut:i.error&&i.error.code==="ETIMEDOUT",isCanceled:!1,killed:i.signal!==null});if(!r.options.reject)return u;throw u}return{command:s,escapedCommand:o,exitCode:0,stdout:c,stderr:a,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};q.exports.command=(e,t)=>{let[n,...r]=fn(e);return ee(n,r,t)};q.exports.commandSync=(e,t)=>{let[n,...r]=fn(e);return ee.sync(n,r,t)};q.exports.node=(e,t,n={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(n=t,t=[]);let r=ln.node(n),s=process.execArgv.filter(c=>!c.startsWith("--inspect")),{nodePath:o=process.execPath,nodeOptions:i=s}=n;return ee(o,[...i,e,...Array.isArray(t)?t:[]],b(m({},n),{stdin:void 0,stdout:void 0,stderr:void 0,stdio:r,shell:!1}))}});var Gs={};Bn(Gs,{default:()=>bn});var g=require("@raycast/api"),N=require("react");var yn=require("@raycast/api");var gn=Be(require("node:process"),1),Sn=Be(hn(),1);async function te(e){if(gn.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await(0,Sn.default)("osascript",["-e",e]);return t}function Ts(e){return e==="true"}function Cs(e){return Array.from(Array(e.length).keys()).sort((t,n)=>e[t].localeCompare(e[n]))}async function xn(){let t=(await te(`
    use framework "IOBluetooth"
    set deviceList to {}
    set deviceStatus to {}
    repeat with device in (current application's IOBluetoothDevice's pairedDevices() as list)
      copy (device's nameOrAddress as string) to the end of deviceList
      copy (device's isConnected as boolean) to the end of deviceStatus
    end repeat
    return {deviceList, deviceStatus}
  `)).split(","),n=t.slice(0,t.length/2).map(o=>o.trim()),r=t.slice(t.length/2,t.length).map(o=>o.trim()).map(o=>Ts(o)),s=Cs(n);return n=s.map(o=>n[o]),r=s.map(o=>r[o]),{deviceNames:n,deviceStatuses:r}}async function vn(e){return await te(`
    use framework "IOBluetooth"

    on getMatchingDevice(deviceName)
      repeat with device in (current application's IOBluetoothDevice's pairedDevices() as list)
        if (device's nameOrAddress as string) contains deviceName then return device
      end repeat
    end getMatchingDevice

    set device to getMatchingDevice("${e}")
    if not (device's isConnected as boolean) then
      if device's openConnection() = 0 then
        return "1"
      end if
      return "0"
    else
      if device's closeConnection() = 0 then
        return "1"
      end if
      return "0" 
    end if
  `)==="1"}async function wn(){await(0,yn.closeMainWindow)(),await te(`
    tell application "System Preferences"
      activate
      if exists window "Bluetooth" then
        tell window "Bluetooth" to if it is miniaturized then set minitiaruzied to false
      else
        set current pane to pane "com.apple.preferences.Bluetooth"
      end if
    end tell
  `)}function bn(){let[e,t]=(0,N.useState)([]),[n,r]=(0,N.useState)([]),[s,o]=(0,N.useState)(!0);(0,N.useEffect)(()=>{async function c(){let{deviceNames:a,deviceStatuses:u}=await xn();t(a),r(u),o(!1)}c()},[]);let i=async(c,a)=>{let u=await(0,g.showToast)({style:g.Toast.Style.Animated,title:n[a]?"Disconnecting":"Connecting"});if(await vn(c)){let p=[...n];p[a]=!p[a],r(p),u.style=g.Toast.Style.Success,u.title=p[a]?"Connected to device!":"Disconnected from device!"}else u.style=g.Toast.Style.Failure,u.title=n[a]?"Failed to disconnect!":"Failed to connect!"};return _jsx(g.List,{enableFiltering:!0,isLoading:s,navigationTitle:"Connect/Disconnect Bluetooth Devices",searchBarPlaceholder:"Search devices"},_jsx(g.List.Section,{title:"Devices"},e.map((c,a)=>_jsx(g.List.Item,{key:c,title:c,icon:{source:n[a]?"on.png":"off.png"},actions:_jsx(g.ActionPanel,null,_jsx(g.Action,{title:n[a]?"Disconnect":"Connect",icon:g.Icon.Link,onAction:async()=>await i(c,a)}),_jsx(g.Action,{title:"Open Bluetooth Preferences",icon:g.Icon.Gear,onAction:wn}))}))))}module.exports=Rn(Gs);0&&(module.exports={});
