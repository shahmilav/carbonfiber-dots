"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[9534],{8507:(e,t,n)=>{n.d(t,{n:()=>Te});var a=n(67294),r=n(50114),c=n(69559),o=n(27937),l=n(42781),i=n(4236),s=n(13218),u=n(70296),m=n(87462),f=n(69518),h=n.n(f),d=n(62031),E=n(49058),g=n(5843),y=n(97605),p=n(96206),C=n(18261),v=n(4232),k=n(80507),S=n(25988),I=n(35410),T=n(86514),b=n(59823),_=n(20006),N=n(26010),B=n(69010),P=n(52759),w=n(69691);const x="view-homeShortcutsGrid-shortcuts",M="view-homeShortcutsGrid-grid",U="view-homeShortcutsGrid-shortcutLink",R="view-homeShortcutsGrid-shortcut",D="view-homeShortcutsGrid-draggable",H="view-homeShortcutsGrid-imageContainer",L="view-homeShortcutsGrid-imageWrapper",A="view-homeShortcutsGrid-image",O="CKxS_0I5yf3i15WAjzvE",W="view-homeShortcutsGrid-main",q="view-homeShortcutsGrid-nameWrapper",Z="view-homeShortcutsGrid-name",z="EzRmGRncgnv1zFgF4dqE",F="bPmmKmSPLKMhtJSaUJRX",j="vpQWUBWS_lXRLZMRJT7w",J="GSv7K805J9Jw7LB9tn2A",Y="view-homeShortcutsGrid-PlayButtonContainer",G="s9c9x_mJq197U2hBzGtV",X=a.memo((function({item:e}){const{useDownloading:t}=(0,a.useContext)(N.I),{currentAvailability:n}=t(e.uri),r=e.duration_ms??0,{isPlaying:c,isActive:o}=(0,w.$o)(e.uri),[l]=(0,P.z)(1e4,(t=>t.item?.uri===e.uri)),i=e.resume_point?.resume_position_ms??0,s=c||o?l:i,u=Math.round(100/(r/s)),m=n===B.V8.YES,f=r&&s>0;return m||f?a.createElement("div",{className:j},m?a.createElement(b.E,{iconSize:16,semanticColor:"textSubdued"}):null,f?a.createElement(_.k,{className:J,value:u,semanticColor:"essentialBase"}):null):null}));var K=n(94184),V=n.n(K),$=n(51615),Q=n(28760),ee=n(43864),te=n(85592),ne=n(34325),ae=n(84242),re=n(54444),ce=n(99191),oe=n(56802),le=n(67892),ie=n(80418),se=n(49961);const ue=a.memo((function({images:e=[],fallbackIcon:t=d.U}){const n=(0,se.X)(e),r=n?.url?L:O;return a.createElement("div",{className:H},a.createElement("div",{className:r},a.createElement(ie.E,{className:A,src:n?.url,loading:"lazy",testid:"shortcut-image"},a.createElement(t,{"aria-hidden":!0}))))})),me=a.memo((function({index:e,item:t,fallbackIcon:n,showPlayButton:r,extraContent:c,onContextMenu:o=(()=>{}),onTouchStart:l=(()=>{}),onTouchEnd:i=(()=>{})}){const s=(0,$.k6)(),m=(0,oe.o)(),{setColorFromUri:f,resetColor:d,clearColor:E}=(0,u.WQ)(),g=(0,ne.G3)(t.uri,t.release_date,t.resume_point?.resume_position_ms,t.resume_point?.fully_played),{spec:y,logger:p}=(0,re.fU)(ee.createDesktopShortcutsPlayNavCardEventFactory,{data:{position:e,uri:t.uri}}),{isPlaying:C,isActive:v,togglePlay:k}=(0,ae.n)({uri:t.uri},{featureIdentifier:"home",referrerIdentifier:"home"});const S=(0,a.useCallback)((()=>{m({targetUri:t.uri,intent:"navigate",type:"click"});const e=y.hitUiNavigate({destination:t.uri});p.logInteraction(e),s.push(h().from(t.uri).toURLPath(!0))}),[s,t.uri,p,m,y]),I=(0,a.useCallback)((()=>{f(t.uri)}),[t.uri,f]);(0,a.useEffect)((()=>()=>{E()}),[E]);const T=(0,re.Wi)(y),b=(0,ce.O1)([t.uri],t.name);return a.createElement("div",{ref:T,className:R,onContextMenu:o,onTouchStart:l,onTouchEnd:i,onMouseEnter:I,onMouseLeave:d},a.createElement("div",{className:D,onDragStart:b},a.createElement(ue,{images:t.images,fallbackIcon:n}),a.createElement("div",{className:W},a.createElement("div",{className:q},a.createElement("div",{className:Z},g&&a.createElement(ne.Rd,{className:F}),a.createElement(le.r,{to:t.uri,onClick:S,title:t.name},a.createElement(Q.Dy,{as:"p",variant:"balladBold",className:z},t.name))),c||null),r&&a.createElement("div",{className:V()(Y,{[G]:C})},a.createElement(te.fh,{isPlaying:C,onClick:function(){m({targetUri:t.uri,intent:C?"pause":"play",type:"click"});const e=y.playButtonFactory();let n;n=C?e.hitPause({itemToBePaused:t.uri}):v?e.hitResume({itemToBeResumed:t.uri}):e.hitPlay({itemToBePlayed:t.uri});const a=p.logInteraction(n);k({loggingParams:a})}}))),a.createElement("div",{onClick:S,className:U})))})),fe=a.memo((function(e){return h().isCollection(e.item.uri)?a.createElement(me,(0,m.Z)({},e,{fallbackIcon:d.U})):a.createElement(C._,{menu:a.createElement(I.X,{uri:e.item.uri})},a.createElement(me,(0,m.Z)({},e,{fallbackIcon:d.U})))})),he=a.memo((function(e){return a.createElement(C._,{menu:a.createElement(v.Y,{uri:e.item.uri})},a.createElement(me,(0,m.Z)({},e,{fallbackIcon:E.c})))})),de=a.memo((function(e){return a.createElement(C._,{menu:a.createElement(k.m,{uri:e.item.uri})},a.createElement(me,(0,m.Z)({},e,{fallbackIcon:g.a})))})),Ee=a.memo((function(e){return a.createElement(C._,{menu:a.createElement(T.M,{uri:e.item.uri})},a.createElement(me,(0,m.Z)({},e,{fallbackIcon:y.J,showPlayButton:!1})))})),ge=a.memo((function(e){return a.createElement(C._,{menu:a.createElement(S.k,{uri:e.item.uri})},a.createElement(me,(0,m.Z)({},e,{fallbackIcon:y.J,extraContent:a.createElement(X,e)})))}));var ye=n(11436),pe=n(49068);const Ce="J6UEDIqMSJhYlwGoeUZB",ve="ZjFf4lVC48DSryAjP9qB",ke=a.memo((function(e){const t=(0,pe.x)(),n={...e.item,...t};return a.createElement(me,(0,m.Z)({},e,{item:n,fallbackIcon:()=>a.createElement("div",{className:Ce},a.createElement(ye.P,{iconSize:32,className:ve}))}))})),Se=270,Ie=a.memo((function({title:e,tagline:t,items:n}){const{fetchMultipleColors:r}=(0,u.WQ)(),[o,m]=(0,a.useState)({minWidth:Se,itemHeight:80,showPlayButton:!0}),f=!(0,i.k)(),d=(0,a.useRef)(null),E=e??(()=>{const e=(new Date).getHours();let t=p.ag.get("home.evening");return e>=5&&e<12?t=p.ag.get("home.morning"):e>=12&&e<18&&(t=p.ag.get("home.afternoon")),t})(),g=(0,a.useCallback)((()=>{if(!d.current)return;const e=d.current.offsetWidth,t=e<600?200:Se;const n=Math.min(Math.floor((e+24)/(t+24)),3);m({minWidth:t,showPlayButton:(e-24*(n-1))/n>=Se,itemHeight:e>=858?80:64})}),[]);if((0,c.a)((()=>{g()})),(0,a.useEffect)((()=>{g()}),[g]),(0,a.useEffect)((()=>{const e=n?.map(u.lh)||[];r(e)}),[n,r]),f||!n?.length)return null;const y=64===o.itemHeight?12:16;return a.createElement("section",{className:x,"aria-label":E,ref:d},a.createElement(s.r,{title:E,titleVariant:"alto",tagline:t}),a.createElement("div",{className:M,style:{"--min-column-width":`${o.minWidth}px`,"--column-gap":"24px","--row-gap":`${y}px`,"--item-height":`${o.itemHeight}px`}},n.filter(((e,t)=>t<6)).map(((e,t)=>{if((e=>{if(null!==e&&"object"==typeof e){const{type:t,name:n}=e;return t===l.p.YOUR_EPISODES&&"string"==typeof n}return!1})(e))return a.createElement(ke,{index:t,key:`${t}-${e.uri}`,item:e,showPlayButton:o.showPlayButton,shouldSetBackgroundColor:0===t});const n=function(e){const t=(h().from(e)||{}).type;switch(t){case h().Type.ARTIST:return de;case h().Type.ALBUM:case h().Type.COLLECTION_ALBUM:return he;case h().Type.PLAYLIST:case h().Type.PLAYLIST_V2:return fe;case h().Type.SHOW:return Ee;case h().Type.EPISODE:return ge;case h().Type.COLLECTION:return fe;default:return console.warn(`Unable to resolve entity shortcut from ${e} of type "${t||"unknown"}"`),Ee}}(e.uri);return a.createElement(n,{index:t,key:`${t}-${e.uri}`,item:e,showPlayButton:o.showPlayButton,shouldSetBackgroundColor:0===t})}))))})),Te=(0,r.P)(Ie,(()=>null),(e=>(0,o.vK)(e,"HomeShortcutsGrid")))},47402:(e,t,n)=>{n.d(t,{M:()=>P});var a=n(67294),r=n(94184),c=n.n(r),o=n(86706),l=n(51615),i=n(69518),s=n.n(i),u=n(73012),m=n(28760),f=n(7438),h=n(10149),d=n(90884),E=n(96206),g=n(32648),y=n(64005),p=n(49023),C=n(54444),v=n(1393),k=n(15416);const S="g3Xinb8x23n81ejvS9Uj",I="x-searchInput-searchInputInput",T="XD3TMuMHmKsfbqieC6q_",b="x-searchInput-searchInputSearchIcon",_="x-searchInput-searchInputClearButton",N="t2K4_iLmAyDtH7mcT5Wy",B="mOLTJ2mxkzHJj6Y9_na_",P=a.memo((function({isSearchChipsEnabled:e=!1,onSearch:t=!0}){const n=(0,l.TH)(),r=(0,a.useRef)(null),i=(0,a.useRef)(null),P=(0,l.k6)(),w=(0,o.I0)(),[{category:x,query:M},U]=(0,k.l)(),[R,D]=(0,a.useState)(M),H=!!x,{scrollNodeRef:L}=a.useContext(g.VX),A=n.pathname.startsWith("/recent-searches"),O=H||A,{spec:W,logger:q}=(0,C.fU)(d.createDesktopSearchInputEventFactory,{}),Z=(0,y.y)(((t,n,a)=>{e?U(t,x,!1,a):U(t,null,n,a),L.current&&(L.current.scrollTop=0)}),200),z=(0,a.useCallback)(((e=!1)=>{r.current!==document.activeElement&&(i.current=document.activeElement,r.current&&r.current.focus()),e&&r.current?.select()}),[]);(0,p.eY)(p.O4.SHOW_SEARCH,(()=>z(!0))),(0,a.useEffect)((()=>{!O&&t&&(e&&M||z())}),[M,z,P.location.key,t,O,e]);return a.createElement("div",{className:c()(S,{[T]:!t})},a.createElement("form",{onSubmit:e=>{e.preventDefault(),R&&q.logInteraction(W.keyStrokeSearch());const t=s().from(R);if(t)if(t.type===s().Type.AD){const e=s().idToHex(t.getBase62Id());if(t.getBase62Id()===e)return;w((0,v.HI)(e))}else P.push(t.toURLPath(!0));else R&&L.current?.querySelector("h1, h2, h3, h4")?.focus()},role:"search"},a.createElement(m.Dy,{variant:"mesto",as:"input",style:{color:u.Snx},ref:r,className:c()(I),value:R,maxLength:800,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,onChange:e=>{const t=e.currentTarget.value,{interactionId:n}=q.logInteraction(W.keyStrokeChangeSearchQuery({searchQueryString:t}));D(t),Z(t,O,n)},onKeyDown:e=>{if("Escape"===e.key)if(R){const{interactionId:e}=q.logInteraction(W.hitTextClear());D(""),Z("",O,e)}else r.current&&r.current.blur(),i.current instanceof HTMLElement&&i.current.focus()},placeholder:t?E.ag.get("search.search-for-label"):E.ag.get("navbar.search"),onFocus:()=>{e||!O&&t||Z(R,O)},"data-testid":"search-input"})),a.createElement("div",{className:N},a.createElement("span",{className:b},a.createElement(f.j,{className:B,"aria-hidden":!0})),R&&a.createElement("button",{className:_,onClick:()=>{r.current&&r.current.focus();const{interactionId:e}=q.logInteraction(W.hitTextClear());D(""),Z("",O,e)},"aria-label":E.ag.get("search.a11y.clear-input")},a.createElement(h.k,{className:B}))))}))},15416:(e,t,n)=>{n.d(t,{l:()=>c});var a=n(67294),r=n(51615);function c(){const e=(0,r.k6)(),t=(0,r.$B)("/search/:query?/:category?"),n=(0,a.useCallback)((function(t,n,a,r){const c=r?{interactionId:r}:void 0,o=["/search"];t&&(o.push(encodeURIComponent(t)),n&&o.push(n));const l=o.join("/");a?e.push(l,c):e.replace(l,c)}),[e]),c=function(e){try{return decodeURIComponent(e)}catch{return e}}(t?.params.query||""),o=t?.params.category;return[{query:c,category:o},n]}},23060:(e,t,n)=>{n.d(t,{S:()=>i});var a=n(67294),r=n(87577),c=n(49207),o=n(28638),l=n(47402);const i=()=>(0,r.W6)(c.Jw)===c.pF.ONHOME?a.createElement(o.w,null,a.createElement(l.M,{onSearch:!1})):null}}]);
//# sourceMappingURL=9534.js.map